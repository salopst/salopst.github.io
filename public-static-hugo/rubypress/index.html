<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="admin">
<meta name="description" content="Happy enough with the output of koiné word of the day for the time being. Maybe I&amp;rsquo;ll make it into a wordpress plugin or something at some point in the future, but probably not. For now it makes sense to have the local script interface with Wordpress&#39; APIs. ONe of the more commonly used and updated rubygem is rubypress, so let&amp;rsquo;s start there.
$gem install rubypress ==&amp;gt; write permission error" />
<meta name="keywords" content="[keywords] blog, Emacs, Hugo, technology, recipes, yearl" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#223835" />
<link rel="canonical" href="//localhost:1313/rubypress/" />


    <title>
        
            rubypress :: [::1] YEARL.US  — Hello, friendo.
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="//localhost:1313/main.dede02da9537a98158079c023e83573e18127834838ef08172acce888341a797.css">




    <link rel="apple-touch-icon" sizes="180x180" href="//localhost:1313/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="//localhost:1313/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="//localhost:1313/favicon-16x16.png">
    <link rel="manifest" href="//localhost:1313/site.webmanifest">
    <link rel="mask-icon" href="//localhost:1313/safari-pinned-tab.svg" color="#223835">
    <link rel="shortcut icon" href="//localhost:1313/favicon.ico">
    <meta name="msapplication-TileColor" content="#223835">
    <meta name="theme-color" content="#223835">



<meta itemprop="name" content="rubypress">
<meta itemprop="description" content="Happy enough with the output of koiné word of the day for the time being. Maybe I&rsquo;ll make it into a wordpress plugin or something at some point in the future, but probably not. For now it makes sense to have the local script interface with Wordpress&#39; APIs. ONe of the more commonly used and updated rubygem is rubypress, so let&rsquo;s start there.
$gem install rubypress ==&gt; write permission error">
<meta itemprop="datePublished" content="2014-09-01T18:35:07+00:00" />
<meta itemprop="dateModified" content="2014-09-01T18:35:07+00:00" />
<meta itemprop="wordCount" content="391">
<meta itemprop="image" content="//localhost:1313/"/>



<meta itemprop="keywords" content="" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="//localhost:1313/"/>

<meta name="twitter:title" content="rubypress"/>
<meta name="twitter:description" content="Happy enough with the output of koiné word of the day for the time being. Maybe I&rsquo;ll make it into a wordpress plugin or something at some point in the future, but probably not. For now it makes sense to have the local script interface with Wordpress&#39; APIs. ONe of the more commonly used and updated rubygem is rubypress, so let&rsquo;s start there.
$gem install rubypress ==&gt; write permission error"/>



    <meta property="og:title" content="rubypress" />
<meta property="og:description" content="Happy enough with the output of koiné word of the day for the time being. Maybe I&rsquo;ll make it into a wordpress plugin or something at some point in the future, but probably not. For now it makes sense to have the local script interface with Wordpress&#39; APIs. ONe of the more commonly used and updated rubygem is rubypress, so let&rsquo;s start there.
$gem install rubypress ==&gt; write permission error" />
<meta property="og:type" content="article" />
<meta property="og:url" content="//localhost:1313/rubypress/" />
<meta property="og:image" content="//localhost:1313/"/>
<meta property="article:published_time" content="2014-09-01T18:35:07+00:00" />
<meta property="article:modified_time" content="2014-09-01T18:35:07+00:00" />






    <meta property="article:published_time" content="2014-09-01 18:35:07 &#43;0000 &#43;0000" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="//localhost:1313/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text"> ~</span>
            <span class="logo__cursor" style=
                  "
                   background-color:#8fbcbb;
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="//localhost:1313/about/">About</a></li><li><a href="//localhost:1313/posts/">Stephen</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">
        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>2 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="//localhost:1313/rubypress/">rubypress</a>
            </h1>

            

            <div class="post-content">
                <p>Happy enough with the output of koiné word of the day for the time being. Maybe I&rsquo;ll make it into a wordpress plugin or something at some point in the future, but probably not. For now it makes sense to have the local script interface with Wordpress' APIs. ONe of the more commonly used and updated rubygem is <a href="https://github.com/zachfeldman/rubypress">rubypress</a>, so let&rsquo;s start there.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$gem install rubypress
</code></pre></div><p>==&gt; write permission error</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$sudo chown -R <span style="color:#e6db74">`</span>whoami<span style="color:#e6db74">`</span> /Library/Ruby/Gems/2.0.0
$gem install rubypress
$sudo gem update
$sudo gem install rubygems-update
$sudo update_rubygems
$sudo gem update --system
$gem -v
</code></pre></div><p>==&gt; 2.4.1</p>
<p>Try connecting:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">require <span style="color:#e6db74">&#39;rubygems&#39;</span>
require <span style="color:#e6db74">&#39;rubypress&#39;</span>
wp <span style="color:#f92672">=</span> <span style="color:#66d9ef">Rubypress</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Client</span><span style="color:#f92672">.</span>new(<span style="color:#e6db74">:host</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;stephen.yearl.us&#34;</span>,
<span style="color:#e6db74">:username</span> <span style="color:#f92672">=&gt;</span>; <span style="color:#e6db74">&#34;foo&#34;</span>,
<span style="color:#e6db74">:password</span> <span style="color:#f92672">=&gt;</span>; <span style="color:#e6db74">&#34;bar&#34;</span>)

p wp<span style="color:#f92672">.</span>getOptions
</code></pre></div><p>==&gt; 403!</p>
<p>Hmm. Tried connecting with a third-party blogging tool (<a href="https://itunes.apple.com/us/app/pixelpumper/id595901917?mt=12">Pixelpumper</a>) and the same 403! This post is interesting, and the highest ranked answer (<a href="http://stackoverflow.com/questions/9141497/wordpress-403-forbidden-error">http://stackoverflow.com/questions/9141497/wordpress-403-forbidden-error</a>) suggests trying the plugins. What fun.</p>
<p>I only uninstalled a few of the the most recently installed plugins back until I remember this not being an issue and still no dice, so it was back to Google, and it shortly became apparent that xmlrpc.php had been the target of a number of pingback DDOS attacks recently. I contacted my hosting provider, and sure enough they had disabled access to xmlrpc.php, but did offer the tantalising possible solution of obfuscating the name and location of xmlrpc, and installing a plugin, &ldquo;Rename XMLRPC&rdquo;:<a href="https://apps.wordpress.org/support/#faq-ios-12"> https://apps.wordpress.org/support/#faq-ios-12</a> Well, no dice here either!</p>
<p>It&rsquo;s something of a pain not to be able to use a third-party blog editor, but I am not at this often enough for that to be a real hassle. I guess the next thing to do is to dig into the structure of Ruby gems, and see if I cannot override the call to xmlrpc.php to some obfuscated version of it.</p>
<hr>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$gem list
</code></pre></div><p>==&gt; rubypress (1.0.8)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$gem contents rubypress
/Library/Ruby/Gems/2.0.0/gems/rubypress-1.0.8/lib/rubypress.rb
/Library/Ruby/Gems/2.0.0/gems/rubypress-1.0.8/lib/rubypress/client.rb
/Library/Ruby/Gems/2.0.0/gems/rubypress-1.0.8/lib/rubypress/comments.rb
/Library/Ruby/Gems/2.0.0/gems/rubypress-1.0.8/lib/rubypress/media.rb
/Library/Ruby/Gems/2.0.0/gems/rubypress-1.0.8/lib/rubypress/options.rb
/Library/Ruby/Gems/2.0.0/gems/rubypress-1.0.8/lib/rubypress/posts.rb
/Library/Ruby/Gems/2.0.0/gems/rubypress-1.0.8/lib/rubypress/taxonomies.rb
/Library/Ruby/Gems/2.0.0/gems/rubypress-1.0.8/lib/rubypress/users.rb
/Library/Ruby/Gems/2.0.0/gems/rubypress-1.0.8/lib/rubypress/xml_rpc_retryable.rb
$cd /Library/Ruby/Gems/2.0.0/gems/rubypress-1.0.8/lib/
</code></pre></div><p>And looky what&rsquo;s inside client.rb!</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#f92672">...</span>
<span style="color:#66d9ef">module</span> Rubypress

  <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Client</span>

    <span style="color:#66d9ef">attr_reader</span> <span style="color:#e6db74">:connection</span>
    <span style="color:#66d9ef">attr_accessor</span> <span style="color:#e6db74">:port</span>, <span style="color:#e6db74">:host</span>, <span style="color:#e6db74">:path</span>, <span style="color:#e6db74">:username</span>, <span style="color:#e6db74">:password</span>, <span style="color:#e6db74">:use_ssl</span>, <span style="color:#e6db74">:default_post_fields</span>,
                  <span style="color:#e6db74">:debug</span>, <span style="color:#e6db74">:http_user</span>, <span style="color:#e6db74">:http_password</span>, <span style="color:#e6db74">:retry_timeouts</span>

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">initialize</span>(options <span style="color:#f92672">=</span> {})
      {
        <span style="color:#e6db74">:port</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">80</span>,
        <span style="color:#e6db74">:use_ssl</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">false</span>,
        <span style="color:#e6db74">:host</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">nil</span>,
        <span style="color:#e6db74">:path</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;/xmlrpc.php&#39;</span>,
        <span style="color:#e6db74">:username</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">nil</span>,
        <span style="color:#e6db74">:password</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">nil</span>,
        <span style="color:#e6db74">:default_post_fields</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">%w(post terms custom_fields)</span>,
        <span style="color:#e6db74">:debug</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">false</span>,
        <span style="color:#e6db74">:http_user</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">nil</span>,
        <span style="color:#e6db74">:http_password</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">nil</span>,
        <span style="color:#e6db74">:retry_timeouts</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">false</span>
      }<span style="color:#f92672">.</span>merge(options)<span style="color:#f92672">.</span>each{ <span style="color:#f92672">|</span>opt<span style="color:#f92672">|</span> self<span style="color:#f92672">.</span>send(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">#{</span>opt<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span><span style="color:#f92672">]</span><span style="color:#e6db74">}</span><span style="color:#e6db74">=&#34;</span>, opt<span style="color:#f92672">[</span><span style="color:#ae81ff">1</span><span style="color:#f92672">]</span>) }
      self
    <span style="color:#66d9ef">end</span>
<span style="color:#f92672">...</span>
</code></pre></div><p><strong>Boomshacka!</strong> Problem solved!</p>

            </div>
        </article>

        <hr />

        <div class="post-info">

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>391 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2014-09-01 19:35 &#43;0100</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h"></span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="//localhost:1313/borschtards/">
                                <span class="button__icon">←</span>
                                <span class="button__text">Borschtards</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="//localhost:1313/koin%C4%93-greek-word-of-the-day/">
                                <span class="button__text">Koinē Greek : word of the day</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        
            <div id="comments" class="thin">
                <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "@usyearlsjy" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2021</span>
            
                <span><a href="//localhost:1313/">yearlus</a></span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            
        </div>
    </div>
    
</footer>

            
        </div>

        




<script type="text/javascript" src="//localhost:1313/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js" integrity="sha512-3HFukJLJggt3&#43;W2ilNASCu6xibW86pdSMJ6&#43;on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script>



    </body>
</html>
