<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="admin">
<meta name="description" content="IA Writer to Wordpress 0. Wha? With the coming of the new doggie into the house, perhaps I will again add more content to the bloggy thing that I have kinda sorta not really been keeping over the last little while.
Probably this has been done by someone else on the Intertubz, but ach, why not. I have some time on my hands, so here are running notes in IA Writer that will make its way to a Wordpress post by some means or other." />
<meta name="keywords" content="[keywords] blog, Emacs, Hugo, technology, recipes, yearl, blog, blogging, code, editors, gem, iA Writer, ruby, rubypress, text, text editor, wordpress, workflow" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#223835" />
<link rel="canonical" href="http://localhost:1313/posting-from-ia-writer-to-wordpress-coleman/" />


    <title>
        
            Posting from IA Writer to Wordpress (Coleman) :: [::1] yearl.us  — Hello, friendo.
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="http://localhost:1313/main.dede02da9537a98158079c023e83573e18127834838ef08172acce888341a797.css">




    <link rel="apple-touch-icon" sizes="180x180" href="http://localhost:1313/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
    <link rel="manifest" href="http://localhost:1313/site.webmanifest">
    <link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg" color="#223835">
    <link rel="shortcut icon" href="http://localhost:1313/favicon.ico">
    <meta name="msapplication-TileColor" content="#223835">
    <meta name="theme-color" content="#223835">



<meta itemprop="name" content="Posting from IA Writer to Wordpress (Coleman)">
<meta itemprop="description" content="IA Writer to Wordpress 0. Wha? With the coming of the new doggie into the house, perhaps I will again add more content to the bloggy thing that I have kinda sorta not really been keeping over the last little while.
Probably this has been done by someone else on the Intertubz, but ach, why not. I have some time on my hands, so here are running notes in IA Writer that will make its way to a Wordpress post by some means or other.">
<meta itemprop="datePublished" content="2016-04-24T00:01:57+00:00" />
<meta itemprop="dateModified" content="2016-04-24T00:01:57+00:00" />
<meta itemprop="wordCount" content="720">
<meta itemprop="image" content="http://localhost:1313/"/>



<meta itemprop="keywords" content="blog,blogging,code,editors,gem,iA Writer,ruby,rubypress,text,text editor,wordpress,workflow," />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://localhost:1313/"/>

<meta name="twitter:title" content="Posting from IA Writer to Wordpress (Coleman)"/>
<meta name="twitter:description" content="IA Writer to Wordpress 0. Wha? With the coming of the new doggie into the house, perhaps I will again add more content to the bloggy thing that I have kinda sorta not really been keeping over the last little while.
Probably this has been done by someone else on the Intertubz, but ach, why not. I have some time on my hands, so here are running notes in IA Writer that will make its way to a Wordpress post by some means or other."/>



    <meta property="og:title" content="Posting from IA Writer to Wordpress (Coleman)" />
<meta property="og:description" content="IA Writer to Wordpress 0. Wha? With the coming of the new doggie into the house, perhaps I will again add more content to the bloggy thing that I have kinda sorta not really been keeping over the last little while.
Probably this has been done by someone else on the Intertubz, but ach, why not. I have some time on my hands, so here are running notes in IA Writer that will make its way to a Wordpress post by some means or other." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posting-from-ia-writer-to-wordpress-coleman/" />
<meta property="og:image" content="http://localhost:1313/"/>
<meta property="article:published_time" content="2016-04-24T00:01:57+00:00" />
<meta property="article:modified_time" content="2016-04-24T00:01:57+00:00" />




    <meta property="article:section" content="Apple" />

    <meta property="article:section" content="os x" />

    <meta property="article:section" content="tech" />



    <meta property="article:published_time" content="2016-04-24 00:01:57 &#43;0000 &#43;0000" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="http://localhost:1313/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text"> ~</span>
            <span class="logo__cursor" style=
                  "
                   background-color:#8fbcbb;
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="http://localhost:1313/about/">About</a></li><li><a href="http://localhost:1313/posts/">Stephen</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">
        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>4 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="http://localhost:1313/posting-from-ia-writer-to-wordpress-coleman/">Posting from IA Writer to Wordpress (Coleman)</a>
            </h1>

            

            <div class="post-content">
                <h1 id="ia-writer-to-wordpress">IA Writer to Wordpress</h1>
<h2 id="0-wha">0. Wha?</h2>
<p>With the coming of the new <a href="http://stephen.yearl.us/rescue-doggie-diary/">doggie into the house</a>, perhaps I will again add more content to the <a href="http://stephen.yearl.us">bloggy thing</a> that I have kinda sorta not really been keeping over the last little while.</p>
<p>Probably this has been done by someone else on the Intertubz, but ach, why not. I have some time on my hands, so here are running notes in <a href="https://ia.net/writer">IA Writer</a> that will make its way to a <a href="https://www.wordpress.com">Wordpress</a> post by some means or other. There’s nothing special about IA writer, by the way. Well, there <strong>is</strong>, but not for the purposes of the Wordpress posting. The same code should work with any plain-ish text file coming from any editor.</p>
<p>Why bother? Well, I think that the primary reason a lot of my notes have not made it to the blog is that it is just such a PITA to go out of my way to make a blog posting. If it all just sorta “works” from my usual workflows than that would perhaps be a very different situation. Not that I think I have anything particularly interesting or unique to say</p>
<h2 id="1-this-file">1. This file</h2>
<p>Is written in markdown, with <a href="https://github.com/fletcher/MultiMarkdown/wiki/MultiMarkdown-Syntax-Guide#metadata">metadata</a> at the head:</p>
<pre><code>&lt;code&gt;Title: IA Writer to Wordpress  
Author: yearlus  
Email: stephen@yearl.us  
Date: 2016-04-26  
Format: complete  
post_status: draft  
post_date: 2016-04-26 
post_title: IA Writer to Wordpress  
category: tech  
post_tag: text, editors, Ruby, code, Wordpress, workflow  


# [%Title]
&lt;/code&gt;
</code></pre>
<h2 id="heading"></h2>
<h2 id="2-markdown-processors">2. Markdown processors</h2>
<p>Four Ruby processors for playing with markdown are briefly alluded to here: <a href="http://www.sitepoint.com/markdown-processing-ruby/">markdown-processing-ruby</a></p>
<p>And I went ahead and played with two of these:</p>
<p><a href="https://github.com/vmg/redcarpet">Redcarpet</a></p>
<pre><code>&lt;code lang=&quot;Bash&quot; class=&quot;Bash&quot;&gt;$ gem install redcarpet -n /usr/local/bin
&lt;/code&gt;
</code></pre>
<p><a href="http://kramdown.gettalong.org/">Kramdown</a></p>
<pre><code>&lt;code lang=&quot;Bash&quot; class=&quot;Bash&quot;&gt;$ gem install kramdown -n /usr/local/bin
&lt;/code&gt;
</code></pre>
<p>But neither of these processors support (yet!) the metadata blocks of <a href="https://github.com/fletcher/MultiMarkdown-5">MultiMarkdown</a>. And kramdown does not recognise the back-tick code-fence (<code> </code>), only the tilda code-fence (~~~ ~~~)</p>
<p>So, install <a href="https://github.com/fletcher/MultiMarkdown-4/">Fletcher Penney’s MultiMarkdown</a>, and test:</p>
<pre><code>&lt;code lang=&quot;Bash&quot; class=&quot;Bash&quot;&gt;$ brew install multimarkdown
$ multimarkdown ~/_scratch/IA-Writer-to-WP-Coleman-Notes.txt &gt; ~/_scratch/IA-Writer-to-WP-Coleman-Notes.html
&lt;/code&gt;
</code></pre>
<p>Gives some very nice HTML, including interpolation of the metadata (of this file), and writing of that metadata:</p>
<pre><code>&lt;code lang=&quot;HTML&quot; class=&quot;HTML&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;&lt;/meta&gt;
    &lt;title&gt;IA Writer to Wordpress&lt;/title&gt;
    &lt;meta content=&quot;yearlus&quot; name=&quot;author&quot;&gt;&lt;/meta&gt;
    &lt;meta content=&quot;stephen@yearl.us&quot; name=&quot;email&quot;&gt;&lt;/meta&gt;
    &lt;meta content=&quot;2016-04-26&quot; name=&quot;date&quot;&gt;&lt;/meta&gt;
    &lt;meta content=&quot;complete&quot; name=&quot;format&quot;&gt;&lt;/meta&gt;
    &lt;meta content=&quot;draft&quot; name=&quot;post_status&quot;&gt;&lt;/meta&gt;
    &lt;meta content=&quot;2016-04-26&quot; name=&quot;post_date&quot;&gt;&lt;/meta&gt;
    &lt;meta content=&quot;IA Writer to Wordpress&quot; name=&quot;post_title&quot;&gt;&lt;/meta&gt;
    &lt;meta content=&quot;tech&quot; name=&quot;category&quot;&gt;&lt;/meta&gt;
    &lt;meta content=&quot;text, editors, Ruby, code, Wordpress, workflow&quot; name=&quot;post_tag&quot;&gt;&lt;/meta&gt;
&lt;/head&gt;
&lt;/code&gt;
</code></pre>
<p>So the process for this exercise seems clear:</p>
<ol>
<li>“<del>shell out” to markdown and produce an html file</del></li>
<li>process that html with <a href="https://github.com/sparklemotion/nokogiri">nokogiri</a></li>
<li>post to Wordpress</li>
</ol>
<p>No need to shell out, apparently. tillsc has already built a Ruby extension library around MultiMarkdown, <a href="https://github.com/tillsc/multi_markdown">Ruby MultiMarkdown 4</a>, so
I guess the awkward bit would be how best to execute the ruby script that pulls all this together… from a services menu item, maybe? And then how to deal with edits&hellip; something in the metadata at the head of the file? A call to getPost call to XML RPC to see if an existing post &ldquo;matching&rdquo; (on what criterion?) that about to be posted exists? But what to check on? Is the old post deleted? I suppose when one starts thinking about these things then one might just as well produce an actual interface to Wordpress, but why bother when there are so many such things anyway?</p>
<p>Maybe I will look into that&hellip; but I am reasonably happy with the fact that this post came from iA Writer, and without too much trouble either. Next up? A horror-show of a MultiMarkdown file in iA Writer to to see how much gets translated into a decent-ish looking post.</p>
<h2 id="heading-1"></h2>
<h2 id="3-code">3. Code</h2>
<p>Posting to Wordpress is pretty straightforward. All the heavy lifting is done by the <a href="https://github.com/zachfeldman/rubypress">rubypress gem</a>, which makes this sort of thing doggone simple (see what I did there!). Here a block of code from that thing I wrote a while ago that scraped a Koine Greek “Word of the Day” from Ἡ Καινὴ Διαθήκη. <a href="http://stephen.yearl.us/koine-greek-word-of-the-day-%E1%BC%90%CF%80%CE%AF%CE%B8%CE%B5%CF%83%CE%B9%CF%82-%CE%B5%CF%89%CF%82-%E1%BC%A1/">Last post here</a></p>
<pre><code>&lt;code lang=&quot;Ruby&quot; class=&quot;Ruby&quot;&gt;# ========== Post to Wordpress ==========
if options[:wordpress_write] == 'yes'
  wp = Rubypress::Client.new(
    host:      &quot;#{config['wp']['host']}&quot;,
    username:  &quot;#{config['wp']['username']}&quot;,
    password:  &quot;#{config['wp']['password']}&quot;,
    path:      &quot;#{config['wp']['path']}&quot;)

  wp.newPost(
    blog_id:    '0',
    content:    {
      post_status:   'draft',
      post_date:     Time.now,
      post_title:    &quot;#{html_title}&quot;,
      terms_names:  {
        post_tag:     ['greek', 'koine', 'κοινή', 'language'],
        category:     ['Greek']
      },
      post_content:  &quot;#{wp_content}&quot;
    }
  )
end
# ========== END WP Post ==========
&lt;/code&gt;
</code></pre>
<hr>
<p>posted with wpiawriter v. 0.1</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="http://localhost:1313/tags/blog">blog</a></span><span class="tag"><a href="http://localhost:1313/tags/blogging">blogging</a></span><span class="tag"><a href="http://localhost:1313/tags/code">code</a></span><span class="tag"><a href="http://localhost:1313/tags/editors">editors</a></span><span class="tag"><a href="http://localhost:1313/tags/gem">gem</a></span><span class="tag"><a href="http://localhost:1313/tags/ia-writer">iA Writer</a></span><span class="tag"><a href="http://localhost:1313/tags/ruby">ruby</a></span><span class="tag"><a href="http://localhost:1313/tags/rubypress">rubypress</a></span><span class="tag"><a href="http://localhost:1313/tags/text">text</a></span><span class="tag"><a href="http://localhost:1313/tags/text-editor">text editor</a></span><span class="tag"><a href="http://localhost:1313/tags/wordpress">wordpress</a></span><span class="tag"><a href="http://localhost:1313/tags/workflow">workflow</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>720 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2016-04-24 01:01 &#43;0100</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h"></span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="http://localhost:1313/rescue-doggie-diary-week-2/">
                                <span class="button__icon">←</span>
                                <span class="button__text">Rescue Doggie Diary -- Week 2</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="http://localhost:1313/rescue-doggie-diary/">
                                <span class="button__text">Rescue Doggie Diary</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        
            <div id="comments" class="thin">
                <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "@usyearlsjy" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2021</span>
            
                <span><a href="http://localhost:1313/">yearlus</a></span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            
        </div>
    </div>
    
</footer>

            
        </div>

        




<script type="text/javascript" src="http://localhost:1313/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js" integrity="sha512-3HFukJLJggt3&#43;W2ilNASCu6xibW86pdSMJ6&#43;on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script>



    </body>
</html>
